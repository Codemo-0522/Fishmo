<!-- ç«‹å³è®¾ç½®ä¸»é¢˜ï¼Œé¿å…é—ªçƒ -->
<script>
(function() {
    const savedTheme = localStorage.getItem('globalTheme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    document.body.setAttribute('data-theme', savedTheme);
})();
</script>

<!-- é€šç”¨å¯¼èˆªæ æ¨¡æ¿ -->
<div class="top-bar">
    <div class="logo-other-div">
        <!--LogoåŒºåŸŸ-->
        <div class="logo-div" onclick="window.location.href='/'">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Fishmo" class="logo">
            <span class="brand-name">Fishmo</span>
        </div>
        <!-- å¯¼èˆªé“¾æ¥ -->
        <div class="nav-links">
            <a href="{{ url_for('index') }}" class="nav-link {% if request.path == '/' %}active{% endif %}">é¦–é¡µ</a>
            <a href="{{ url_for('video_page') }}" class="nav-link {% if request.path == '/video' %}active{% endif %}">ç•™å½±é˜</a>
            <a href="{{ url_for('image_page') }}" class="nav-link {% if request.path == '/image' %}active{% endif %}">ä¸‡è±¡é‰´</a>
            <a href="{{ url_for('audio_page') }}" class="nav-link {% if request.path == '/audio' %}active{% endif %}">æº¯éŸ³å°</a>
        </div>
    </div>

    <!-- å³ä¾§æ§åˆ¶åŒºåŸŸ -->
    <div class="nav-controls">
        <!-- æ±‰å ¡èœå•æŒ‰é’® -->
        <div class="nav-toggle">
            <span class="nav-toggle-icon">â‰¡</span>
        </div>
    </div>
</div>

<!-- ä¾§è¾¹å¯¼èˆª -->
<div class="side-nav">
<!--    <div class="side-nav-close">X</div>-->

    <!-- æ·»åŠ ç”¨æˆ·ä¿¡æ¯åŒºåŸŸåˆ°ä¾§è¾¹æ é¡¶éƒ¨ -->
    <div class="side-nav-header">
        <div class="user-profile">
            <div class="user-info-sidebar">
                <div class="an">
                    <div class="user-avatar" id="sidebarUserAvatar">
                        <img src="{{ url_for('static', filename='images/img8.png') }}" alt="ç”¨æˆ·å¤´åƒ" class="user-avatar-img">
                    </div>
                    <span class="user-name" id="sidebarUserName">æœªç™»å½•</span>
                </div>
                <div class="user-details">
                    <a href="javascript:void(0)" class="sidebar-logout-btn" onclick="handleLogout()">é—­å…³</a>
                </div>
            </div>
            <div class="login-buttons">
                <a href="javascript:void(0)" class="sidebar-login-btn" onclick="showLoginModal()">çµå¥‘å½’æº</a>
                <a href="javascript:void(0)" class="sidebar-register-btn" onclick="showRegisterModal()">çµå¥‘ç¼”ç»“</a>
            </div>
        </div>
    </div>

    <div class="side-nav-menu">
        <!-- å¤©æœºé˜åˆ†ç±» -->
        <div class="menu-category">
            <a href="{{ url_for('index') }}" class="menu-item {% if request.path == '/' %}active{% endif %}">
                <span class="menu-item-icon">ğŸ </span>æ–°æ‰‹æ‘
            </a>
            <a href="{{ url_for('video_page') }}" class="menu-item {% if request.path == '/video' %}active{% endif %}">
                <span class="menu-item-icon">ğŸ¬</span>ç•™å½±é˜
            </a>
            <a href="{{ url_for('image_page') }}" class="menu-item {% if request.path == '/image' %}active{% endif %}">
                <span class="menu-item-icon">ğŸ–¼ï¸</span>ä¸‡è±¡é‰´
            </a>
            <a href="{{ url_for('audio_page') }}" class="menu-item {% if request.path == '/audio' %}active{% endif %}">
                <span class="menu-item-icon">ğŸµ</span>æº¯éŸ³å°
            </a>
            {% if is_admin %}
            <a href="{{ url_for('admin_page') }}" class="menu-item {% if request.path == '/admin' %}active{% endif %}">
                <span class="menu-item-icon">âš™ï¸</span>å¤©æ¢ç›‘
            </a>
            {% endif %}
        </div>
        <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
        <div class="theme-toggle" id="globalThemeToggle">
            <i class="fas fa-sun"></i>
        </div>

    </div>
</div>

<!-- ä¾§è¾¹å¯¼èˆªé®ç½©å±‚ -->
<div class="side-nav-overlay"></div>

<!-- ç™»å½•æ³¨å†Œå¼¹çª— -->
<div class="auth-modal" id="authModal" style="display: none;">
    <div class="auth-content">
        <div class="auth-tabs">
            <div class="auth-tab active" data-tab="login" onclick="switchTab('login')">çµå¥‘å½’æº</div>
            <div class="auth-tab" data-tab="register" onclick="switchTab('register')">çµå¥‘ç¼”ç»“</div>
        </div>

        <!-- ç™»å½•è¡¨å• -->
        <div class="auth-form" id="loginForm">
            <input type="text" placeholder="è¯·è¾“å…¥çµå¥‘å°è®°" id="loginAccount">
            <input type="password" placeholder="è¯·è¾“å…¥çµå¥‘å¯†é’¥" id="loginPassword">
            <button class="auth-btn" onclick="handleLogin()">å½’æº</button>
        </div>

        <!-- æ³¨å†Œè¡¨å• -->
        <div class="auth-form" id="registerForm" style="display: none;">
            <input type="text" placeholder="è¯·è¾“å…¥çµå¥‘å°è®°" id="registerAccount">
            <input type="password" placeholder="è¯·è¾“å…¥çµå¥‘å¯†é’¥" id="registerPassword">
            <input type="password" placeholder="è¯·å†æ¬¡è¾“å…¥çµå¥‘å¯†é’¥" id="registerConfirm">
            <button class="auth-btn" onclick="handleRegister()">ç¼”ç»“</button>
        </div>
    </div>
</div>